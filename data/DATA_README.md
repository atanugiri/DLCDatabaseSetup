# Data Directory

This directory contains raw and split video data for generating the trial metadata database.

## Data Sources

Download the video datasets from Harvard Dataverse (archives are large; we host split archives as multipart zip parts):

1. **Raw Videos (4-quadrant recordings)**: [Animal Videos for 4 mazes in RECORD setup](https://doi.org/10.7910/DVN/SBH3UG)
   - Citation: Giri, Atanu, 2025, "Animal Videos for 4 mazes in RECORD setup", Harvard Dataverse, V1

2. **Split Videos (individual animals)**: [Videos for DLC analysis](https://doi.org/10.7910/DVN/F0P2BC)
   - Citation: Giri, Atanu, 2025, "Videos for DLC analysis", Harvard Dataverse, V1

Note: the raw video archives are very large. We typically upload multipart zip archives (e.g. `RawVideos.zip.part001`, `RawVideos.zip.part002`, ...). If you are downloading the multipart uploads you will need to concatenate the parts before extracting — see instructions below.

**Also:** DLC tracking CSVs are stored/used in the `GhrelinBehaviorQuantification` repository for downstream analysis; this repo only contains the scripts and metadata CSV handlers.

## Setup Instructions

1. Download both video archives from Harvard Dataverse
2. Extract each archive **directly into this `data/` directory**:
   ```bash
   cd DLCDatabaseSetup/data
   
   # Extract raw videos archive
   unzip Animal_behavior_RawVideos.zip
   # Creates: RawVideos/
   
   # Extract split videos archive
   unzip Animal_behavior_SplitVideos.zip
   # Creates: SplitVideos/
   ```

3. Final structure:
   ```
   DLCDatabaseSetup/data/
   ├── RawVideos/
   │   ├── WhiteAnimals10X/
   │   │   ├── FoodOnly/*.mp4
   │   │   ├── FoodLight/*.mp4
   │   │   └── [other tasks]/*.mp4
   │   └── WhiteAnimals2X/
   │       ├── FoodOnly/*.mp4
   │       ├── FoodLight/*.mp4
   │       └── [other tasks]/*.mp4
   │
   └── SplitVideos/
       ├── WhiteAnimals10X/
       │   └── [tasks]/*.mp4
       └── WhiteAnimals2X/
           └── [tasks]/*.mp4
   ```

Additional processed outputs (DLC CSVs) are expected to be organized under `data/DlcDataPytorchFiltered/` with the following layout:
   ```
   data/DlcDataPytorchFiltered/
   ├── WhiteAnimals10X/
   │   ├── FoodLight/
   │   │   └── FoodLight_8_4_25_S1P_CauliflowerDLC_Resnet50_..._filtered.csv
   │   └── FoodOnly/
   │       └── FoodOnly_7_30_25_S1P_CauliflowerDLC_Resnet50_..._filtered.csv
   └── WhiteAnimals2X/
      └── ...
   ```
   
## Purpose

This repository generates the **metadata** (`dlc_table.csv`) that maps:
- Video names → Task, Treatment, Maze number, Animal name
- Split video names → Path to DLC CSV (relative path for portability)

The generated CSV will have paths like:
```
data/DlcDataPytorchFiltered/WhiteAnimals10X/FoodOnly/FoodOnly_7_30_25_S1P_CauliflowerDLC_Resnet50_DLC-WhiteAnimalsJul23shuffle1_snapshot_060_filtered.csv
```

These paths typically point to DLC CSVs produced by DeepLabCut and stored alongside the project outputs (often in the `GhrelinBehaviorQuantification` repository or a shared storage bucket).

Concatenating and extracting multipart archives
```
# On a Unix-like system (macOS / Linux):
# Concatenate parts in numeric order and unzip
cat RawVideos.zip.part* > RawVideos.zip
unzip RawVideos.zip

# On Windows (cmd.exe):
copy /b RawVideos.zip.part* RawVideos.zip
powershell -Command "Expand-Archive -Path RawVideos.zip -DestinationPath ."
```

## Filename Conventions

### Raw Videos (Mother Videos)
Format: `Task_MM_DD_YY_HealthCode_Animal1_Animal2_Animal3_Animal4[_Trial#].mp4`

Example: `FoodOnly_7_29_25_S1Y_Celery_Broccoli_Spinach_None.mp4`

### Split Videos
Format: `Task_MM_DD_YY_HealthCode_AnimalName.mp4`

Example: `FoodOnly_7_29_25_S1Y_Celery.mp4`

### DLC CSVs
Generated by DeepLabCut from split videos with pose-estimation data.

Format: `Task_MM_DD_YY_HealthCode_AnimalNameDLC_Resnet50_..._filtered.csv`

## Note

Video files (`*.mp4`, `*.avi`) are excluded from git tracking via `.gitignore`. Only scripts and documentation are version controlled.
